import chapter.eight.CloudBees
import chapter.eight.CloudBeesInfoTask
import chapter.eight.PlatformAsAService

task cloudBeesAppInfo() {
    description = 'Get CloudBees App information'
    group = 'CloudBees'
} << {
    PlatformAsAService client = new CloudBees(
            [
                    appId  : appId,
                    url    : 'www.cloudbees.com',
                    key    : key,
                    secret : secret,
                    version: 1.0,
                    format : 'xml'
            ]
    )
    client.applicationInfo().each { k, v -> println "$k = $v" }
}

task cloudBeesDeployWar() {
    description = 'Deploy application to CloudBees'
    group = 'CloudBees'
} << {
    PlatformAsAService client = new CloudBees(
            [
                    appId  : appId,
                    url    : 'www.cloudbees.com',
                    key    : key,
                    secret : secret,
                    version: 1.0,
                    format : 'xml'
            ]
    )
    client.applicationDeployWar()
}


task cloudBeesAppInfoCustomTask(type: CloudBeesInfoTask) {
    appId = project.appId
    url = 'www.cloudbees.com'
    key = project.key
    secret = project.secret
    version = 1.0
    format = 'xml'
}

