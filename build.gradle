import chapter.eight.CloudBeesInfoTask
import chapter.eight.CloudBeesInfoTaskUsingSuper
import chapter.eight.mock.CloudBees
import chapter.eight.mock.PlatformAsAService

task cloudBeesAppInfo() {
    description = 'Get CloudBees App information'
    group = 'CloudBees'
} << {
    PlatformAsAService client = new CloudBees(
            [
                    key    : key,
                    secret : secret,
                    url    : 'www.cloudbees.com',
                    version: 1.0,
                    format : 'xml'
            ]
    )
    client.applicationInfo(appId).each { k, v -> println "$k = $v" }
}

task cloudBeesDeployWar() {
    description = 'Deploy application to CloudBees'
    group = 'CloudBees'
} << {
    PlatformAsAService client = new CloudBees(
            [
                    key    : key,
                    secret : secret,
                    url    : 'www.cloudbees.com',
                    version: 1.0,
                    format : 'xml'
            ]
    )
    client.applicationDeployWar(appId)
}


task cloudBeesAppInfoCustomTask(type: CloudBeesInfoTask) {
    appId = project.appId
    key = project.key
    secret = project.secret
}

task cloudBeesAppInfoCustomTaskUsingSuper(type: CloudBeesInfoTaskUsingSuper) {
    appId = project.appId
    key = project.key
    secret = project.secret
}

